angular.module("starter").controller("PushController",function($location,$rootScope,$scope,$stateParams,LinkService,SB,Push){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,collection:[],toggle_text:!1,card_design:!1,load_more:!1,use_pull_refresh:!0}),Push.setValueId($stateParams.value_id),$scope.loadContent=function(loadMore){if(isOverview)Push.getSample().then(function(payload){$scope.collection=payload.collection,$scope.is_loading=!1});else{var offset=$scope.collection.length;Push.findAll(offset).then(function(data){data.collection&&($scope.collection=$scope.collection.concat(data.collection),$rootScope.$broadcast(SB.EVENTS.PUSH.readPush)),$scope.page_title=data.page_title,$scope.load_more=data.collection.length>=data.displayed_per_page}).then(function(){loadMore&&$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.is_loading=!1})}},$scope.pullToRefresh=function(){isOverview?Push.getSample().then(function(payload){$scope.collection=payload.collection,$scope.is_loading=!1,$scope.$broadcast("scroll.refreshComplete")}):($scope.pull_to_refresh=!0,$scope.load_more=!1,Push.findAll(0,!0).then(function(data){data.collection&&($scope.collection=data.collection,$rootScope.$broadcast(SB.EVENTS.PUSH.readPush)),$scope.load_more=data.collection.length>=data.displayed_per_page}).then(function(){$scope.$broadcast("scroll.refreshComplete"),$scope.pull_to_refresh=!1}))},$scope.showItem=function(item){if(item.url){if($rootScope.isNotAvailableOffline())return;LinkService.openLink(item.url,{},!1)}else item.action_value&&$location.path(item.action_value)},$scope.hasItem=function(item){return item.url||item.action_value},$scope.loadMore=function(){$scope.loadContent(!0)},$scope.loadContent()});