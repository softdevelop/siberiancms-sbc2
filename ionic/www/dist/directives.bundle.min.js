function EventToDirective(app,directive_name,eventName){return app.directive(directive_name,["$parse",function($parse){return{restrict:"A",compile:function($element,attr){return function(scope,element,attr){element.on(eventName,function(event){scope.$apply($parse(attr[directive_name]).bind(null,scope,{$event:event}))})}}}}])}angular.module("starter").directive("datetime",function($ionicPlatform){return{restrict:"A",scope:{date:"="},link:function(scope,element){$ionicPlatform.is("android")&&element.bind("blur",function(){scope.date=this.value,scope.$parent.$apply()})}}}),angular.module("starter").directive("locationButton",function(){return{restrict:"E",template:'<button ng-show="locationIsDisabled()"\n        ng-click="requestLocation()"\n        ng-class="buttonClass"\n        class="button button-clear header-item places-secondary-button">\n    <i ng-class="iconClass"       class="icon ion-sb-location-off icon-warning-custom"></i>\n</button>',scope:{success:"=?",error:"=?",buttonClass:"=?",iconClass:"=?"},replace:!0,controller:function($scope,$rootScope,Location){$scope.locationIsDisabled=function(){return!Location.isEnabled},$scope.requestLocation=function(){Location.requestLocation($scope.success,$scope.error)}}}}),angular.module("starter").directive("repeatDone",function(){return function(scope,element,attrs){scope.$last&&scope.$eval(attrs.repeatDone)}}),angular.module("starter").directive("sbAClick",function($rootScope,$timeout,$window,$state,Pages,Dialog,LinkService,Customer){return{restrict:"A",scope:{},priority:-10,link:function(scope,element){$timeout(function(){var collection=angular.element(element).find("a");angular.forEach(collection,function(elem){if(void 0!==elem.attributes["data-state"]){var params=elem.attributes["data-params"].value;params=params.replace(/(^\?)/,"").split(",").map(function(n){return this[(n=n.split(":"))[0].trim()]=n[1],this}.bind({}))[0];var state=elem.attributes["data-state"].value,offline=void 0!==elem.attributes["data-offline"]&&"true"===elem.attributes["data-offline"].value;angular.element(elem).bind("click",function(e){if(e.preventDefault(),"my-account"===state)Customer.loginModal();else if(!offline&&$rootScope.isOffline)$rootScope.onlineOnly();else{if(params.hasOwnProperty("value_id")){var feature=Pages.getValueId(params.value_id);if(feature&&!feature.is_active)return void Dialog.alert("Error","This feature is no longer available.","OK",2350)}$state.go(state,params)}})}else angular.element(elem).bind("click",function(e){e.preventDefault(),LinkService.openLink(elem.href,{},!1)})})})}}}),angular.module("starter").directive("sbAlbumsBoxes",function(){return{restrict:"A",templateUrl:"templates/media/music/l1/album/boxes.html",scope:{paged_albums:"=pagedAlbums",onAlbumSelected:"&"}}}),angular.module("starter").directive("sbAppLocked",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"templates/html/l1/app_locked.html",controller:function($ionicHistory){$ionicHistory.clearHistory()}}}),angular.module("starter").directive("sbCmsText",function(){return{restrict:"A",scope:{block:"="},template:'<div class="item item-text-wrap item-custom sb-cms-text">   <img alt="cms-image"         width="{{block.size}}%"         ng-src="{{ block.image_url }}"         ng-if="block.image.length"         class="{{ block.alignment }}" />   <div class="content"         ng-bind-html="block.content | trusted_html"         sb-a-click></div>   <div class="cb"></div></div>'}}).directive("sbCmsImage",function(){return{restrict:"A",scope:{block:"=",gallery:"="},template:'<div class="sb-cms-block-image">    <div class="item item-image-gallery item-custom">        <ion-scroll direction="y">           <ion-gallery ion-gallery-items="block.gallery"                         ng-if="!is_loading"></ion-gallery>       </ion-scroll>    </div>    <div ng-if="block.description"          class="item item-custom padding description">{{ block.description }}</div></div>'}}).directive("sbPlaceImage",function(){return{restrict:"A",scope:{block:"=",gallery:"="},template:'<div class="sb-place-block-image">    <div ng-if="block.description"          class="item item-custom padding description">{{ block.description }}</div>    <div class="item item-image-gallery item-custom">        <ion-scroll direction="y">           <ion-gallery ion-gallery-items="block.gallery"                         ng-if="!is_loading"></ion-gallery>       </ion-scroll>    </div></div>'}}).directive("sbCmsCover",function(){return{restrict:"A",scope:{block:"="},template:'<img width="100%"      ng-src="{{ block.gallery[0].src }}"      alt="{{block.name}}" />'}}).directive("sbCmsSlider",function(){return{restrict:"A",scope:{block:"=",gallery:"="},template:'<div class="item item-image-gallery item-custom sb-cms-image">   <ul rn-carousel        rn-carousel-index="carouselIndex"        class="image">       <li ng-repeat="image in block.gallery">           <div sb-image                 image-src="image.src"                 ng-click="showFullscreen($index)"></div>       </li>   </ul>   <div rn-carousel-indicators         ng-if="block.gallery.length > 1"         slides="block.gallery"         rn-carousel-index="carouselIndex"></div></div><div ng-if="block.description"      ng-style="lineReturn"      class="item item-custom padding description">{{ block.description }}</div><script id="zoom-modal.html"         type="text/ng-template">   <div class="sb-cms-image modal fullscreen">       <ion-header-bar class="bar-dark">           <button class="button button-clear pull-right"                    ng-click="hideFullscreen()">{{ "Done" | translate:"cms" }}           </button>       </ion-header-bar>       <ion-content>           <ul rn-carousel                rn-carousel-index="carouselIndexModal"                class="image"                id="zoomedImage">               <li ng-repeat="image in block.gallery">                   <ion-scroll delegate-handle="slide-{{ $index }}"                                overflow-scroll="false"                                direction="xy"                                zooming="true"                                ng-swipe-left="setCarouselIndex($index+1)"                                ng-swipe-right="setCarouselIndex($index-1)">                       <div class="image"                             sb-image                             image-src="image.src"></div>                   </ion-scroll>               </li>           </ul>           <div rn-carousel-indicators                 ng-if="block.gallery.length > 1"                 slides="block.gallery"                 rn-carousel-index="carouselIndexModal"></div>       </ion-content>   </div><\/script>',controller:function($ionicGesture,Modal,$ionicScrollDelegate,$scope){$scope.carouselIndex=0,$scope.is_fullscreen=!1,$scope.lineReturn={},1==$scope.block.allow_line_return&&($scope.lineReturn={"word-wrap":"normal","white-space":"normal"}),$scope.setCarouselIndex=function(index){var localIndex=index;localIndex<0?localIndex=0:localIndex>=$scope.block.gallery.length&&(localIndex-=1),$scope.carouselIndexModal=localIndex},$scope.showFullscreen=function(index){Modal.fromTemplateUrl("zoom-modal.html",{scope:$scope,animation:"block"}).then(function(modal){$scope.modal=modal,$scope.carouselIndexModal=index,$scope.modal.show(),$scope.modal.is_zoomed=!1,$scope.modal.scale_to_original_size=!1;var element=angular.element(document.getElementById("zoomedImage"));$scope.modal.release=$ionicGesture.on("release",function(){$scope.modal.scale_to_original_size&&($ionicScrollDelegate.$getByHandle("slide-"+$scope.carouselIndexModal).zoomTo(1,!0),$scope.modal.scale_to_original_size=!1)},element),$scope.modal.pinch=$ionicGesture.on("pinch",function(event,o,t,l){event.gesture.scale<1&&($scope.modal.scale_to_original_size=!0)},element),$scope.modal.doubleTap=$ionicGesture.on("doubletap",function(event){$scope.modal.is_zoomed?$ionicScrollDelegate.$getByHandle("slide-"+$scope.carouselIndexModal).zoomTo(1,!0):$ionicScrollDelegate.$getByHandle("slide-"+$scope.carouselIndexModal).zoomTo(3,!0,event.gesture.touches[0].pageX,event.gesture.touches[0].pageY),$scope.modal.is_zoomed=!$scope.modal.is_zoomed},element)})},$scope.hideFullscreen=function(){$scope.carouselIndex=$scope.carouselIndexModal,$scope.modal.remove()}}}}).directive("sbCmsVideo",function(){return{restrict:"A",scope:{block:"="},template:'<div class="cms_block">   <div sb-video video="block"></div></div>'}}).directive("sbCmsAddress",function(){return{restrict:"A",scope:{block:"=",onShowMap:"&",onAddToContact:"&"},template:'<div class="sb-cms-block-address">   <div class="item item-text-wrap item-icon-left item-custom sb-cms-block-address-locate"         ng-if="block.show_address || block.show_geolocation_button"         ng-click="openIntent()">       <i class="icon ion-sb-turn-right"></i>       <h2 class="sb-cms-address-label"            ng-if="block.label">{{ block.label}}</h2>       <p class="sb-cms-address-address"           ng-if="block.address">{{ block.address }}</p>   </div>   <div class="item item-text-wrap item-icon-left item-custom sb-cms-block-address-phone"         ng-if="block.phone.length && block.show_phone">       <i class="icon ion-android-call"></i>       <p>           <a href="tel:{{ block.phone }}">{{ block.phone }}</a>       </p>   </div>   <div class="item item-text-wrap item-icon-left item-custom sb-cms-block-address-website"         ng-if="block.website.length && block.show_website">       <i class="icon ion-earth"></i>       <p>           <a ng-click="openWebsite(block.website)">{{ block._label }}</a>       </p>   </div></div>',link:function(scope){scope.$watch("block",function(){scope.block._label=scope.block.website.replace(/^https?:\/\//i,"").replace(/\/$/,"").replace(/(\?.*)$/,"").replace(/(\#.*)$/,"")})},controller:function(Location,Loader,LinkService,$rootScope,$scope){$scope.showMap=function(){if(!$rootScope.isNotAvailableInOverview()&&!$rootScope.isNotAvailableOffline()){var to={lat:1*$scope.block.latitude,lng:1*$scope.block.longitude};Navigator.navigate(to)}},$scope.openIntent=function(){$scope.itinerary_link?$scope.itinerary_link&&$scope.openItinary():$scope.showMap()},$scope.openItinary=function(){LinkService.openLink($scope.itinerary_link,{},!0)},$scope.openWebsite=function(url){LinkService.openLink(url,{},!0)},$scope.addToContact=function(){$scope.onAddToContact&&angular.isFunction($scope.onAddToContact)&&$scope.onAddToContact($scope.block)}}}}).directive("sbCmsButton",function(){return{restrict:"A",scope:{block:"="},template:'<a href="{{ url }}"    target="{{ target }}"    class="item item-text-wrap item-icon-left item-custom">   <i class="icon"       ng-class="icon"       ng-if="show_icon"></i>   <i class="icon flex-button-icon"       ng-if="!show_icon">       <img ng-src="{{ icon_src }}"             style="width: 32px; height: 32px;" />   </i>   {{ label | translate }}</a>',controller:function($scope,LinkService){$scope.openLink=function(){var externalBrowser=void 0===$scope.block.external_browser||$scope.block.external_browser;LinkService.openLink($scope.block.content,$scope.block.options||{},externalBrowser)}},link:function(scope,element){var a=angular.element(element).find("a");switch(scope.block.type_id){case"phone":scope.icon="ion-ios-telephone-outline",scope.label=null!==scope.block.label&&scope.block.label.length>0?scope.block.label:"Phone",scope.block.content.startsWith("tel:")||(scope.block.content="tel:"+scope.block.content),scope.url=scope.block.content,scope.target="_self";break;case"link":scope.icon="ion-ios-world-outline",scope.label=null!==scope.block.label&&scope.block.label.length>0?scope.block.label:"Website",a.on("click",function(e){return e.preventDefault(),scope.openLink(),!1}),scope.$on("$destroy",function(){a.off("click")});break;case"email":scope.block.content.startsWith("mailto:")||(scope.block.content="mailto:"+scope.block.content),scope.icon="ion-ios-email",scope.label=null!==scope.block.label&&scope.block.label.length>0?scope.block.label:"Email",scope.url=scope.block.content,scope.target="_self",scope.$on("$destroy",function(){a.off("click")})}scope.show_icon=!0,scope.block.icon.length&&(scope.show_icon=!1,scope.icon_src=scope.block.icon)}}}).directive("sbCmsFile",function(){return{restrict:"A",scope:{block:"="},template:'<div class="item item-text-wrap item-icon-left item-custom"  ng-click="openFile()">   <i class="icon ion-paperclip"></i>   {{ block.display_name }}</div>',controller:function($scope,LinkService){$scope.openFile=function(){LinkService.openLink($scope.block.file_url,{},!0)}}}}).directive("sbCmsSource",function(){return{restrict:"A",scope:{block:"="},template:'<div class="item item-custom">   <iframe class="sb-cms-source"            style="height: {{ frameHeight }};"></iframe></div>',link:function(scope,element){var iframe=angular.element(element).find("iframe")[0];(iframe=iframe.contentWindow||iframe.contentDocument.document||iframe.contentDocument).document.open(),iframe.document.write(scope.block.source),iframe.document.close(),scope.frameHeight=scope.block.height}}}),angular.module("starter").directive("sbCustomTab",function($state,$rootScope,$timeout,$window,Customer,CustomTab){return{restrict:"A",scope:{},link:function(scope,element){$timeout(function(){var collection=angular.element(element).find("a");angular.forEach(collection,function(elem){if(void 0!==elem.attributes["data-state"]){var params=elem.attributes["data-params"].value;params=params.replace(/(^\?)/,"").split(",").map(function(n){return this[(n=n.split(":"))[0].trim()]=n[1],this}.bind({}))[0];var state=elem.attributes["data-state"].value,offline=void 0!==elem.attributes["data-offline"]&&"true"===elem.attributes["data-offline"].value;angular.element(elem).bind("click",function(e){e.preventDefault(),"my-account"===state?Customer.loginModal():!offline&&$rootScope.isOffline?$rootScope.onlineOnly():$state.go(state,params)})}else angular.element(elem).bind("click",function(e){e.preventDefault();var options={tabColor:$window.colors.header.statusBarColor};CustomTab.openLink(elem.href,options)})})})}}}),angular.module("starter").directive("sbDatetimePicker",function(DatetimePicker){return{restrict:"A",scope:{format:"=?",headers:"=?",model:"=?",title:"=?",skipDays:"=?",showWeekDays:"=?",showWeekDaysShort:"=?"},link:function(scope,element){DatetimePicker.isLoaded().then(function(){var options=angular.extend({},DatetimePicker.defaults,{headers:scope.headers||!0,skipDays:scope.skipDays||[],showWeekDays:scope.showWeekDays||!1,showWeekDaysShort:scope.showWeekDaysShort||!1,format:scope.format||"YYYY-MM-DD HH:mm",pick:function(e){scope.model=scope.pickerInstance.getDate(!0),scope.$apply()}});void 0!==scope.title&&(options.text.title=scope.title),scope.pickerInstance=new Picker(element[0],options)})}}}),EventToDirective(angular.module("starter"),"sbError","error"),EventToDirective(angular.module("starter"),"sbLoad","load"),angular.module("starter").directive("sbGoogleAutocomplete",function(GoogleMaps,$timeout){return{scope:{location:"=?",address:"=?",place:"=?",options:"=?",onAddressChange:"&?"},require:"?ngModel",link:function(scope,element,attrs,ngModel){var options=angular.extend({types:[]},scope.options);element.on("keydown",function(e){13===e.which&&""===_.get(document.getElementsByClassName("pac-container"),"[0].style.display")&&e.preventDefault()}),GoogleMaps.addCallback(function(){scope.googleAutocomplete=new google.maps.places.Autocomplete(element[0],options),google.maps.event.addListener(scope.googleAutocomplete,"place_changed",function(data){var place=scope.googleAutocomplete.getPlace();scope.place=place,place.geometry&&(angular.isObject(scope.location)||(scope.location={}),scope.location.latitude=place.geometry.location.lat(),scope.location.longitude=place.geometry.location.lng());var val=element.val();angular.isObject(ngModel)&&angular.isFunction(ngModel.$setViewValue)&&ngModel.$setViewValue(val,"keyup"),$timeout(function(){scope.location.address=val,scope.onAddressChange(scope),console.log("address changed ...... fuck")})})})}}}),angular.module("starter").directive("sbHtml",function($sce,$filter,$state,$parse,$compile,$timeout,Customer,Pages,Dialog,LinkService){return{restrict:"A",compile:function(tElement,tAttrs){var sbHtmlGetter=$parse(tAttrs.sbHtml),sbHtmlWatch=$parse(tAttrs.sbHtml,function(val){return $sce.valueOf(val)});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.sbHtml),scope.$watch(sbHtmlWatch,function(){var value=sbHtmlGetter(scope),html=$filter("parseUrlFilter")(value);html=$sce.trustAsHtml(html),element.html(html),function(element){var linksCollection=angular.element(element).find("a");angular.forEach(linksCollection,function(elem){if(void 0!==elem.attributes["data-state"]){var params=elem.attributes["data-params"].value;params=params.replace(/(^\?)/,"").split(",").map(function(n){return this[(n=n.split(":"))[0].trim()]=n[1],this}.bind({}))[0];var state=elem.attributes["data-state"].value;angular.element(elem).bind("click",function(e){if(e.preventDefault(),"my-account"===state)Customer.loginModal();else{if(params.hasOwnProperty("value_id")){var feature=Pages.getValueId(params.value_id);if(feature&&!feature.is_active)return void Dialog.alert("Error","This feature is no longer available.","OK",2350)}$state.go(state,params)}})}else angular.element(elem).bind("click",function(e){e.preventDefault(),LinkService.openLink(elem.href,{},!1)})})}(element)})}}}}),angular.module("starter").directive("sbImage",function($timeout){return{restrict:"A",scope:{image_src:"=imageSrc"},template:'<div class="image_loader relative scale-fade" ng-hide="is_hidden"><span class="loader block"></span></div>',link:function(scope,element){scope.setBackgroundImageStyle=function(){$timeout(function(){element.css("background-image","url("+img.src+")"),scope.is_hidden=!0})};var img=new Image;img.src=scope.image_src,img.onload=function(){scope.setBackgroundImageStyle()},img.onerror=function(){scope.setBackgroundImageStyle()},img.complete&&scope.setBackgroundImageStyle()},controller:function($scope){$scope.is_hidden=!1}}}),angular.module("starter").directive("sbInputNumber",function($timeout,$translate){return{restrict:"E",scope:{changeQty:"&",step:"=?",min:"=?",max:"=?",value:"=?",label:"=?",params:"=?"},template:'<div class="item item-input item-custom input-number-sb">   <div class="input-label">{{ getLabel() }}</div>   <div class="input-container text-right">       <button class="button button-small button-custom button-left"                ng-click="oneLess()">           <i class="icon ion-minus"></i>       </button>       <div class="item-input-wrapper">           <input type="text"                   value="{{ getValue() }}"                   class="text-center input"                   readonly />       </div>       <button class="button button-small button-custom button-right"                ng-click="oneMore()">           <i class="icon ion-plus"></i>       </button>   </div></div>',replace:!0,link:function(scope,element,attrs){scope.step=scope.step?scope.step:1,scope.min=scope.min?scope.min:0,scope.max=scope.max?scope.max:999,scope.params=scope.params?scope.params:{},scope.label=attrs.label?attrs.label+":":""},controller:function($scope){$scope.oneMore=function(){$scope.value<$scope.max&&($scope.value=$scope.value+1,$scope.callBack($scope.value))},$scope.oneLess=function(){$scope.value>$scope.min&&($scope.value=$scope.value-1,$scope.callBack($scope.value))},$scope.getLabel=function(){return $translate.instant($scope.label)},$scope.getValue=function(){return $scope.value},$scope.callBack=function(value){"function"==typeof $scope.changeQty&&($scope.debouncePromise&&$timeout.cancel($scope.debouncePromise),$scope.debouncePromise=$timeout(function(){$scope.changeQty({qty:value,params:$scope.params}),$scope.debouncePromise=null},800))}}}}),angular.module("starter").directive("sbMaps",function(){return{restrict:"A",scope:{map:"=",config:"="},controller:function($scope,GoogleMaps){GoogleMaps.addCallback(function(){if($scope.map=GoogleMaps.createMap("google-maps"),$scope.config.coordinates){if(!($scope.config.coordinates.origin&&($scope.config.coordinates.origin.latitude&&$scope.config.coordinates.origin.longitude||$scope.config.coordinates.origin.address)))return void console.error("An origin (latitude / longitude or address) is required to use Maps");if(!($scope.config.coordinates.destination&&($scope.config.coordinates.destination.latitude&&$scope.config.coordinates.destination.longitude||$scope.config.coordinates.destination.address)))return void console.error("A destination (latitude / longitude or address) is required to use Maps");GoogleMaps.calculateRoute($scope.config.coordinates.origin,$scope.config.coordinates.destination).then(function(route){GoogleMaps.addRoute(route)})}if($scope.config.markers&&$scope.config.markers.constructor===Array){for(var i=0;i<$scope.config.markers.length;i++){var marker=$scope.config.markers[i];GoogleMaps.addMarker(marker)}if(void 0!==$scope.config.cluster&&GoogleMaps.addCluster(),$scope.config.bounds_to_marker){var bounds=GoogleMaps.getBoundsFromPoints($scope.config.markers);GoogleMaps.fitToBounds(bounds)}}})}}}),angular.module("starter").directive("sbMediaPlayerControls",function(){return{restrict:"A",controller:function($scope,$state,$timeout,$filter,MediaPlayer){angular.extend($scope,{player:MediaPlayer}),MediaPlayer.createModal($scope),$scope.openPlayer=function(){MediaPlayer.openPlayer()},$scope.duration=function(){return $scope.player&&$scope.player.media&&$scope.player.media.duration?$filter("seconds_to_minutes")($scope.player.media.duration):"0:00"},$scope.playPause=function(){MediaPlayer.playPause()},$scope.prev=function(){MediaPlayer.is_minimized||MediaPlayer.loading(),MediaPlayer.prev()},$scope.next=function(){MediaPlayer.is_minimized||MediaPlayer.loading(),MediaPlayer.next()},$scope.willSeek=function(){MediaPlayer.willSeek()},$scope.seekTo=function(position){MediaPlayer.seekTo(position)},$scope.backward=function(){MediaPlayer.backward()},$scope.forward=function(){MediaPlayer.forward()},$scope.repeat=function(){MediaPlayer.repeat()},$scope.shuffle=function(){MediaPlayer.shuffle()},$scope.openPlaylist=function(){MediaPlayer.openPlaylist()},$scope.goBackMedia=function(){MediaPlayer.goBack(MediaPlayer.is_radio,!0)},$scope.closePlaylist=function(){MediaPlayer.closePlaylist()},$scope.destroy=function(origin){MediaPlayer.destroy(origin)},$scope.selectTrack=function(index){MediaPlayer.closePlaylist(),$timeout(function(){MediaPlayer.loading(),MediaPlayer.current_index=index,MediaPlayer.pre_start(),MediaPlayer.start()},500)}}}}),angular.module("starter").directive("miniElapsed",function($interval,$filter,$timeout){return{restrict:"E",replace:!0,template:'<span class="mini-elapsed">{{ elapsedTime }}</span>',scope:{seconds:"=elapsedTime"},link:function(scope,element){scope.elapsedTime=$filter("seconds_to_minutes")(scope.seconds);var stopTime=$interval(function(){$timeout(function(){scope.elapsedTime=$filter("seconds_to_minutes")(scope.seconds)},0)},1e3);element.on("$destroy",function(){$interval.cancel(stopTime)})}}}),angular.module("starter").directive("sbMediaMiniPlayer",function(){return{restrict:"E",templateUrl:"templates/media/music/l1/player/mini.html"}}),angular.module("starter").directive("sbNavView",function($rootScope,SB){return{restrict:"E",replace:!0,template:"<ion-nav-view></ion-nav-view>",link:function(scope,element){$rootScope.$on(SB.EVENTS.MEDIA_PLAYER.SHOW,function(event,args){element.addClass("has-mini-player-controls"),args.isRadio?element.addClass("mini-radio"):element.addClass("mini-audio")}),$rootScope.$on(SB.EVENTS.MEDIA_PLAYER.HIDE,function(){element.removeClass("has-mini-player-controls"),element.removeClass("mini-radio"),element.removeClass("mini-audio")})}}}),angular.module("starter").directive("miniPlayer",function($rootScope,SB){return{restrict:"A",link:function(scope,element){$rootScope.$on(SB.EVENTS.MEDIA_PLAYER.SHOW,function(event,args){element.addClass("has-mini-player-controls"),args.isRadio?element.addClass("mini-radio"):element.addClass("mini-audio")}),$rootScope.$on(SB.EVENTS.MEDIA_PLAYER.HIDE,function(){element.removeClass("has-mini-player-controls"),element.removeClass("mini-radio"),element.removeClass("mini-audio")})}}}),angular.module("starter").directive("sbPad",function(){return{restrict:"E",scope:{card:"="},controller:function($scope,Modal){Modal.fromTemplateUrl("templates/loyaltycard/l1/pad.html",{scope:$scope}).then(function(modal){$scope.modal=modal}),$scope.openPad=function(){$scope.modal.show()},$scope.closeModal=function(){$scope.modal.hide()}}}}),angular.module("starter").directive("sbPadlock",function(Application){return{restrict:"A",controller:function($cordovaBarcodeScanner,$ionicHistory,Modal,$rootScope,$scope,$state,$stateParams,$timeout,$translate,$window,Application,Customer,Dialog,Padlock,SB){$scope.is_webview=Application.is_webview,Application.is_locked&&$ionicHistory.clearHistory(),$rootScope.$on(SB.EVENTS.AUTH.loginSuccess,function(){$scope.is_logged_in=!0}),$rootScope.$on(SB.EVENTS.AUTH.logoutSuccess,function(){$scope.is_logged_in=!1}),$scope.is_logged_in=Customer.isLoggedIn(),$scope.value_id=Padlock.value_id=$stateParams.value_id,Padlock.findUnlockTypes().then(function(data){$scope.unlock_by_account_type=data.unlock_by_account,$scope.unlock_by_qrcode_type=data.unlock_by_qrcode}),$scope.padlock_login=function(){Customer.display_account_form=!1,Customer.loginModal($scope,function(){$rootScope.$broadcast(SB.EVENTS.PADLOCK.unlockFeatures),Application.is_locked?($ionicHistory.clearHistory(),$state.go("home")):$ionicHistory.goBack()})},$scope.padlock_signup=function(){Customer.display_account_form=!0,Customer.loginModal($scope)},$scope.padlock_logout=function(){$scope.is_loading=!0,Customer.logout().then(function(){$scope.is_loading=!1})},$scope.openScanCamera=function(){$scope.scan_protocols=["sendback:"],$cordovaBarcodeScanner.scan().then(function(barcodeData){barcodeData.cancelled||""===barcodeData.text||$timeout(function(){for(var i=0;i<$scope.scan_protocols.length;i++)if(0==barcodeData.text.toLowerCase().indexOf($scope.scan_protocols[i])){$scope.is_loading=!0;var qrcode=barcodeData.text.replace($scope.scan_protocols[i],"");Padlock.unlockByQRCode(qrcode).then(function(){Padlock.unlocked_by_qrcode=!0,$scope.is_loading=!1,$window.localStorage.setItem("sb-uc",qrcode),$rootScope.$broadcast(SB.EVENTS.PADLOCK.unlockFeatures),Application.is_locked?($ionicHistory.clearHistory(),$state.go("home")):$ionicHistory.goBack()},function(data){var message_text=$translate.instant("An error occurred while reading the code.");angular.isObject(data)&&(message_text=data.message),Dialog.alert("Error",message_text,"OK",-1)}).then(function(){$scope.is_loading=!1});break}})},function(error){Dialog.alert("Error","An error occurred while reading the code.","OK",-1)})}}}}),angular.module("starter").directive("sbPageBackground",function($rootScope,$state,$stateParams,$pwaRequest,$session,$timeout,$window,Application){var init=!1,isUpdating=!1,deviceScreen=$session.getDeviceScreen(),deffered=$pwaRequest.defer(),backgroundImages=deffered.promise,catched=!1,orientationChange=$window.matchMedia("(orientation: portrait)");return $session.loaded.then(function(){var loadBackgrounds=function(refresh){$pwaRequest.get("front/assets/backgroundimages",{urlParams:{device_width:deviceScreen.width,device_height:deviceScreen.height},refresh:refresh}).then(function(data){deffered.resolve(data)}).catch(function(){catched||(catched=!0,$timeout(loadBackgrounds(!1),1))})};loadBackgrounds(!0)}),{restrict:"A",controller:function($scope){$scope.valueId="home"===$state.current.name?"home":$stateParams.value_id},link:function(scope,element){var networkDone=!1;scope.setBackgroundImageStyle=function(src,color){if(!isUpdating){isUpdating=!0;var el=angular.element(element);el.addClass("has-background-image"),void 0!==color?el.css({"background-image":"linear-gradient("+color+", "+color+"), url('"+src+"')"}):el.css({"background-image":"url('"+src+"')"}),$timeout(function(){void 0!==navigator.splashscreen&&navigator.splashscreen.hide()},20)}isUpdating=!1},Application.ready.then(function(){networkDone||scope.setBackgroundImageStyle(Application.default_background)});var updateBackground=function(){"tabbar_account"===angular.element(element).attr("code")&&(scope.valueId="account"),backgroundImages.then(function(data){Application.ready.then(function(){networkDone=!0;var valueId=angular.copy(scope.valueId);"landscape"===deviceScreen.orientation&&(valueId="landscape_"+valueId);var exists=angular.isDefined(valueId)&&angular.isDefined(data.backgrounds)&&angular.isDefined(data.backgrounds[valueId]),fallback=(Application.homepage_background||"home"===valueId||"landscape_home"===valueId)&&angular.isDefined(data.backgrounds)&&angular.isDefined(data.backgrounds.home);if(exists||fallback){var backgroundImage=data.backgrounds[valueId];window.tmpImg=new Image,window.tmpImg.src=backgroundImage,window.tmpImg.onload=function(){scope.setBackgroundImageStyle(backgroundImage)},(window.tmpImg.complete||$rootScope.isOffline)&&scope.setBackgroundImageStyle(backgroundImage),delete window.tmpImg}else scope.setBackgroundImageStyle("./img/placeholder/white-1.png",Application.colors.background.rgba);$timeout(function(){void 0!==navigator.splashscreen&&navigator.splashscreen.hide()},20)})})};init||($rootScope.$on("$stateChangeStart",function(evt,toState,toParams){scope.valueId="home"===toState.name?"home":toParams.value_id,updateBackground()}),orientationChange.addListener(function(){deviceScreen=$session.setDeviceScreen(),updateBackground()}),init=!0),scope.valueId="home"===$state.current.name?"home":$stateParams.value_id,updateBackground()}}}),angular.module("starter").directive("sbSideMenu",function(){return{restrict:"E",scope:{},templateUrl:"templates/page/side-menu.html",controller:function($q,$scope,$rootElement,$rootScope,$injector,$timeout,$ionicHistory,$ionicSideMenuDelegate,ContextualMenu,HomepageLayout){ContextualMenu.settings.isReady=$q.defer(),($scope=angular.extend($scope,{contextualMenu:{isEnabled:!1,side:"right"},leftMenu:{width:0,show:!1,src:"blank-menu.html"},rightMenu:{width:0,show:!1,src:"blank-menu.html"}})).goBack=function(){$ionicHistory.goBack()},$scope.checkForUpdate=function(){$rootScope.checkForUpdate()},$scope.showBottom=function(){return $scope.layout_id&&"bottom"===$scope.layout.menu.position&&"homepage"===$scope.layout.menu.visibility},$scope.showAlways=function(){return $scope.layout_id&&"bottom"===$scope.layout.menu.position&&"always"===$scope.layout.menu.visibility},$scope.isMenuOpen=function(){return $ionicSideMenuDelegate.isOpen()},$scope.isMenuLeftOpen=function(){return $ionicSideMenuDelegate.isOpenLeft()},$scope.isMenuRightOpen=function(){return $ionicSideMenuDelegate.isOpenRight()},$scope.layoutIsRight=function(){return!!$scope.layout&&"right"===$scope.layout.menu.position},$scope.layoutIsLeft=function(){return!!$scope.layout&&"left"===$scope.layout.menu.position},$scope.layoutHasSideMenu=function(){return!!$scope.layout&&($scope.layoutIsRight()||$scope.layoutIsLeft())},$scope.showLeftButton=function(){return $scope.layoutIsLeft()},$scope.showRightButton=function(){return $scope.layoutIsRight()},$scope.getLeftMenuWidth=function(){return $scope.leftMenu.width},$scope.getLeftMenuSrc=function(){return $scope.leftMenu.src},$scope.getLeftMenuShow=function(){return $scope.leftMenu.show},$scope.getRightMenuWidth=function(){return $scope.rightMenu.width},$scope.getRightMenuSrc=function(){return $scope.rightMenu.src},$scope.getRightMenuShow=function(){return $scope.rightMenu.show},$scope.contextualMenuIsReady=function(){return ContextualMenu.settings.isReady.promise},$scope.init=function(){ContextualMenu.settings.isReady=$q.defer(),$timeout(function(){$scope.layoutIsLeft()?($scope.leftMenu={width:$scope.layout.menu.sidebarLeftWidth,show:!0,src:"homepage-menu.html"},$scope.contextualMenu.isEnabled=!1,$scope.contextualMenu.side="right",$scope.rightMenu={width:0,show:!1,src:"blank-menu.html"},ContextualMenu.settings.isEnabled&&($scope.contextualMenu.isEnabled=!0,$scope.contextualMenu.side="right",$scope.rightMenu={width:ContextualMenu.settings.width,show:!0,src:ContextualMenu.settings.templateUrl})):$scope.layoutIsRight()?($scope.contextualMenu.isEnabled=!1,$scope.contextualMenu.side="right",$scope.leftMenu={width:0,show:!1,src:"blank-menu.html"},$scope.rightMenu={width:$scope.layout.menu.sidebarRightWidth,show:!0,src:"homepage-menu.html"},ContextualMenu.settings.isEnabled&&($scope.contextualMenu.isEnabled=!0,$scope.contextualMenu.side="left",$scope.leftMenu={width:ContextualMenu.settings.width,show:!0,src:ContextualMenu.settings.templateUrl})):($scope.contextualMenu.isEnabled=!1,$scope.contextualMenu.side="right",$scope.leftMenu={width:0,show:!1,src:"blank-menu.html"},$scope.rightMenu={width:0,show:!1,src:"blank-menu.html"},ContextualMenu.settings.isEnabled&&($scope.contextualMenu.isEnabled=!0,"left"===ContextualMenu.settings.preferredSide?($scope.contextualMenu.side="left",$scope.leftMenu={width:ContextualMenu.settings.width,show:!0,src:ContextualMenu.settings.templateUrl}):($scope.contextualMenu.side="right",$scope.rightMenu={width:ContextualMenu.settings.width,show:!0,src:ContextualMenu.settings.templateUrl}))),$timeout(function(){ContextualMenu.settings.isReady.resolve()},20)},1)},$rootScope.$on("contextualMenu.init",function(){$scope.init()}),$rootScope.$on("contextualMenu.toggle",function(){$scope.contextualMenu.isEnabled&&("left"===$scope.contextualMenu.side?$ionicSideMenuDelegate.toggleLeft(!$scope.isMenuLeftOpen()):$ionicSideMenuDelegate.toggleRight(!$scope.isMenuRightOpen()))}),$rootScope.$on("contextualMenu.close",function(){$scope.contextualMenu.isEnabled&&("left"===$scope.contextualMenu.side?$ionicSideMenuDelegate.toggleLeft(!1):$ionicSideMenuDelegate.toggleRight(!1))}),$rootScope.$on("contextualMenu.open",function(){$scope.contextualMenu.isEnabled&&("left"===$scope.contextualMenu.side?$ionicSideMenuDelegate.toggleLeft(!0):$ionicSideMenuDelegate.toggleRight(!0))}),$rootScope.$on("sideMenu.close",function(){$ionicSideMenuDelegate.isOpenLeft()&&$ionicSideMenuDelegate.toggleLeft(!1),$ionicSideMenuDelegate.isOpenRight()&&$ionicSideMenuDelegate.toggleRight(!1)}),HomepageLayout.getFeatures().then(function(){$scope.layout=HomepageLayout.properties,$scope.layout_id=HomepageLayout.properties.layoutId,angular.element($rootElement).addClass(("layout-"+$scope.layout_id).replace(/[^a-zA-Z0-9_\-]+/,"-").replace(".","-").replace(/\-\-*/,"-")),$scope.init()})}}}),angular.module("starter").directive("sbTabbar",function($pwaRequest,$ionicHistory,Modal,$ionicSlideBoxDelegate,$ionicSideMenuDelegate,$location,$rootScope,$session,$timeout,$translate,$window,$ionicPlatform,Analytics,Application,Customer,Dialog,HomepageLayout,LinkService,Pages,Url,SB){return{restrict:"A",templateUrl:function(){return HomepageLayout.getTemplate()},scope:{},link:function($scope,element,attrs){$scope.tabbar_is_visible=Pages.is_loaded,$scope.tabbar_is_transparent=HomepageLayout.properties.tabbar_is_transparent,$scope.animate_tabbar=!$scope.tabbar_is_visible,$scope.pages_list_is_visible=!1,$scope.active_page=0,$scope.card_design=!1,$scope.layout=HomepageLayout,$scope.loadContent=function(){HomepageLayout.getOptions().then(function(options){$scope.options=options}),HomepageLayout.getData().then(function(data){$scope.data=data,$scope.push_badge=data.push_badge}),HomepageLayout.getFeatures().then(function(features){if($scope.features=features,$timeout(function(){Pages.is_loaded||(Pages.is_loaded=!0,$scope.tabbar_is_visible=!0)},500),!0===$rootScope.loginFeature)!0===$rootScope.loginFeatureBack?$ionicHistory.goBack():$rootScope.loginFeatureBack=!1,$rootScope.loginFeature=null;else if(!Application.is_customizing_colors&&HomepageLayout.properties.options.autoSelectFirst&&!1!==features.first_option){for(var feat_index=0,fi=0;fi<features.options.length;fi+=1){var feat=features.options[fi];if(-1===["code_scan","radio","padlock","tabbar_account"].indexOf(feat.code)){feat_index=fi;break}}features.options[feat_index].path!==$location.path()&&($ionicHistory.nextViewOptions({historyRoot:!0,disableAnimate:!1}),$location.path(features.options[feat_index].path).replace())}})},$scope.closeList=function(){$scope.tabbar_is_visible=!0,$scope.pages_list_is_visible=!1},$scope.gotoPage=function(index){$ionicSlideBoxDelegate.$getByHandle("slideBoxLayout").slide(index)},$scope.closePreviewer=function(){$window.location="app:closeApplication"},$scope.login=function($scope){$rootScope.loginFeature=null,Customer.loginModal($scope)},$scope.loadContent(),$rootScope.isOverview&&$scope.$on("tabbarStatesChanged",function(){$scope.loadContent()}),$rootScope.$on(SB.EVENTS.CACHE.layoutReload,function(){$scope.loadContent()}),$rootScope.$on(SB.EVENTS.PUSH.unreadPushs,function(event,args){$timeout(function(){$scope.push_badge=args})}),$rootScope.$on(SB.EVENTS.PUSH.readPushs,function(){$scope.push_badge=0});var rebuildOptions=function(){$timeout(function(){HomepageLayout.setNeedToBuildTheOptions(!0),$scope.loadContent()})};$rootScope.$on(SB.EVENTS.AUTH.logoutSuccess,function(){rebuildOptions()}),$rootScope.$on(SB.EVENTS.AUTH.loginSuccess,function(){rebuildOptions()}),$rootScope.$on(SB.EVENTS.PADLOCK.unlockFeatures,function(){rebuildOptions()}),$rootScope.$on(SB.EVENTS.CACHE.pagesReload,function(){rebuildOptions()}),Application.loaded.then(function(){rebuildOptions()}),$rootScope.isOverview&&($window.changeIcon=function(id,url){angular.forEach($scope.features.options,function(option){option.id==id&&$timeout(function(){option.icon_url=url})})})}}}),angular.module("starter").directive("tabbarItems",function($rootScope,$timeout,$log,HomepageLayout){return{restrict:"A",scope:{option:"="},link:function(scope,element){scope.option.is_visible?(element.attr("data-value-id",scope.option.value_id),element.attr("data-colorize",scope.option.icon_is_colorable),element.on("click",function(){$rootScope.$broadcast("OPTION_POSITION",scope.option.position),$timeout(function(){HomepageLayout.openFeature(scope.option,scope)})})):element.replaceWith(" ")}}}),angular.module("starter").directive("sbTooltip",function(){return{restrict:"A",scope:{},replace:!1,bindToController:{show_tooltip:"=showTooltip",collection:"=",current_item:"=currentItem",button_label:"=buttonLabel",button_icon:"=buttonIcon",onItemClicked:"&"},controllerAs:"tooltip",template:'<button class="button button-clear"         ng-click="toggleTooltip()">{{ tooltip.button_label | translate }}   <i ng-if="tooltip.button_icon"      ng-class="tooltip.button_icon"></i></button><div class="tooltip tooltip-custom"      ng-show="tooltip.collection.length && tooltip.show_tooltip">    <i class="icon ion-arrow-up-b dark"></i>    <div style="overflow-y: scroll; overflow-x: hidden; max-height: 250px;">        <ul>            <li ng-repeat="item in tooltip.collection">                <span class="block"                       ng-click="itemClicked(item);"                       ng-class="{ \'active\': tooltip.current_item.id == item.id }">{{ item.name | translate }}</span>                <ul ng-show="item.show_children">                    <li ng-repeat="child in item.children">                        <span class="block"                               ng-click="itemClicked(child)"                               ng-class="{ \'active\': tooltip.current_item.id == child.id }">{{ child.name | translate }}</span>                    </li>                </ul>            </li>        </ul>    </div></div>',controller:function($scope){var tooltip=this;$scope.toggleTooltip=function(){tooltip.show_tooltip=!tooltip.show_tooltip},$scope.itemClicked=function(item){item.children||(tooltip.show_tooltip=!1),tooltip.onItemClicked({object:item})}}}}),angular.module("starter").directive("sbVideo",function($timeout,$window,YouTubeAutoPauser){return{restrict:"A",replace:!0,scope:{video:"="},template:'<div class="card">   <div class="item item-image"        ng-click="play()">       <div ng-hide="use_iframe || use_video_element"            ng-style="height_style">           <img ng-src="{{ video.cover_url }}" />           <div class="sprite"></div>       </div>       <div ng-if="use_iframe">           <iframe width="100%"                   height="200"                   src=""                   frameborder="0"                   webkitallowfullscreen                   mozallowfullscreen                   allowfullscreen></iframe>       </div>       <div ng-if="use_video_element">           <div id="video_player_view"                class="player">               <video src=""                       type="video/mp4"                       controls                       preload="none"                       width="100%"                       height="200px"></video>           </div>       </div>   </div>   <div ng-if="video.title"        class="item item-text-wrap item-custom">       <p>{{ video.title }}</p>   </div></div>',link:function(scope,element){scope.height_style=null,scope.video.cover_url||(scope.height_style={"min-height":"200px",width:"100%"}),scope.play=function(){"Android"===device.platform&&parseInt(device.version.substr(0,1))<5?$window.open(scope.video.url,"_system"):/^https?:\/\/(www.|player.)?(youtube|vimeo)\./.test(scope.video.url)?(scope.use_iframe=!0,$timeout(function(){var iframe=element.find("iframe");iframe.attr("src",scope.video.url_embed+"?autoplay=1&autopause=1&enablejsapi=1"),YouTubeAutoPauser.register(iframe)})):(scope.use_video_element=!0,$timeout(function(){element.find("video").attr("src",scope.video.url_embed)}))}},controller:function($scope){$scope.use_iframe=!1,$scope.use_video_element=!1}}});var slidingTabsDirective=angular.module("ionic").directive("ionSlideTabs",["$timeout","$compile","$interval","$ionicSlideBoxDelegate","$ionicScrollDelegate","$ionicGesture",function($timeout,$compile,$interval,$ionicSlideBoxDelegate,$ionicScrollDelegate,$ionicGesture){return{require:"^ionSlideBox",restrict:"A",link:function(scope,element,attrs,parent){var ionicSlideBoxDelegate,ionicScrollDelegate,ionicScrollDelegateID,slideTabs,indicator,slider,tabsBar,options={slideTabsScrollable:!0},addEvents=function(){ionic.onGesture("dragleft",scope.onSlideMove,slider[0]),ionic.onGesture("dragright",scope.onSlideMove,slider[0]),ionic.onGesture("release",scope.onSlideChange,slider[0])},setTabBarWidth=function(){if(!angular.isDefined(slideTabs)||0==slideTabs.length)return!1;tabsList=tabsBar.find("ul");var tabsWidth=0;angular.forEach(slideTabs,function(currentElement,index){var currentLi=angular.element(currentElement);tabsWidth+=currentLi[0].offsetWidth}),options.slideTabsScrollable?angular.element(tabsBar[0].querySelector(".scroll")).css("width",tabsWidth+1+"px"):slideTabs.css("width",tabsList[0].offsetWidth/slideTabs.length+"px"),slideToCurrentPosition()},slideToCurrentPosition=function(){if(!angular.isDefined(slideTabs)||0==slideTabs.length)return!1;var targetSlideIndex=ionicSlideBoxDelegate.currentIndex(),targetTab=angular.element(slideTabs[targetSlideIndex]),targetLeftOffset=targetTab.prop("offsetLeft"),targetWidth=targetTab[0].offsetWidth;if(indicator.css({"-webkit-transition-duration":"300ms","-webkit-transform":"translate("+targetLeftOffset+"px,0px)",width:targetWidth+"px"}),options.slideTabsScrollable&&ionicScrollDelegate){ionicScrollDelegate.scrollTo(targetLeftOffset-40,0,!0)}slideTabs.removeClass("tab-active"),targetTab.addClass("tab-active")};scope.onTabTabbed=function(event,index){!function(event,currentElement){var ink=angular.element(currentElement[0].querySelector(".ink"));angular.isDefined(ink)&&0!=ink.length||(ink=angular.element("<span class='ink'></span>"),currentElement.prepend(ink)),ink.removeClass("animate"),ink.offsetHeight||ink.offsetWidth||(d=Math.max(currentElement[0].offsetWidth,currentElement[0].offsetHeight),ink.css("height",d+"px"),ink.css("width",d+"px")),x=event.offsetX-ink[0].offsetWidth/2,y=event.offsetY-ink[0].offsetHeight/2,ink.css("top",y+"px"),ink.css("left",x+"px"),ink.addClass("animate")}(event,angular.element(event.currentTarget)),ionicSlideBoxDelegate.slide(index),slideToCurrentPosition()},scope.tabs=[],scope.addTabContent=function($content){scope.tabs.push($content),scope.$apply(),$timeout(function(){slideTabs=angular.element(tabsBar[0].querySelector("ul").querySelectorAll(".slider-slide-tab")),slideToCurrentPosition(),setTabBarWidth()})},scope.onSlideChange=function(slideIndex){slideToCurrentPosition()},scope.onSlideMove=function(){var scrollDiv=slider[0].getElementsByClassName("slider-slide"),currentSlideIndex=ionicSlideBoxDelegate.currentIndex(),currentSlideLeftOffset=angular.element(scrollDiv[currentSlideIndex]).css("-webkit-transform").replace(/[^0-9\-.,]/g,"").split(",")[0],targetSlideIndex=(currentSlideIndex+1)%scrollDiv.length;currentSlideLeftOffset>slider.prop("offsetLeft")&&(targetSlideIndex=currentSlideIndex-1)<0&&(targetSlideIndex=scrollDiv.length-1);angular.element(scrollDiv[targetSlideIndex]);var position=currentSlideLeftOffset/slider[0].offsetWidth,slideDirection=position>0?"right":"left";!function(currentSlideIndex,targetSlideIndex,position,slideDirection){var targetTab=angular.element(slideTabs[targetSlideIndex]),currentTab=angular.element(slideTabs[currentSlideIndex]),targetLeftOffset=targetTab.prop("offsetLeft"),currentLeftOffset=currentTab.prop("offsetLeft"),offsetLeftDiff=Math.abs(targetLeftOffset-currentLeftOffset);if(!(0==currentSlideIndex&&targetSlideIndex==ionicSlideBoxDelegate.slidesCount()-1&&"right"==slideDirection||0==targetSlideIndex&&currentSlideIndex==ionicSlideBoxDelegate.slidesCount()-1&&"left"==slideDirection)){var targetWidth=targetTab[0].offsetWidth,widthDiff=targetWidth-currentTab[0].offsetWidth,indicatorPos=0,indicatorWidth=0;currentSlideIndex>targetSlideIndex?(indicatorPos=targetLeftOffset-offsetLeftDiff*(position-1),indicatorWidth=targetWidth-widthDiff*(1-position)):targetSlideIndex>currentSlideIndex&&(indicatorPos=targetLeftOffset+offsetLeftDiff*(position-1),indicatorWidth=targetWidth+widthDiff*(position-1)),indicator.css({"-webkit-transition-duration":"0ms","-webkit-transform":"translate("+indicatorPos+"px,0px)",width:indicatorWidth+"px"}),options.slideTabsScrollable&&ionicScrollDelegate&&ionicScrollDelegate.scrollTo(indicatorPos-40,0,!1)}}(currentSlideIndex,targetSlideIndex,position=Math.abs(position),slideDirection)},function(){angular.isDefined(attrs.slideTabsScrollable)&&"false"===attrs.slideTabsScrollable&&(options.slideTabsScrollable=!1);var tabItems='<li ng-repeat="(key, value) in tabs" ng-click="onTabTabbed($event, {{key}})" class="slider-slide-tab" ng-bind-html="value"></li>';options.slideTabsScrollable?(ionicScrollDelegateID="ion-slide-tabs-handle-"+Math.floor(1e4*Math.random()+1),tabsBar=angular.element('<ion-scroll delegate-handle="'+ionicScrollDelegateID+'" class="slidingTabs" direction="x" scrollbar-x="false"><ul>'+tabItems+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </ion-scroll>')):tabsBar=angular.element('<div class="slidingTabs"><ul>'+tabItems+'</ul> <div class="tab-indicator-wrapper"><div class="tab-indicator"></div></div> </div>'),slider=angular.element(element);var compiled=$compile(tabsBar);slider.parent().prepend(tabsBar),compiled(scope),indicator=angular.element(tabsBar[0].querySelector(".tab-indicator"));var slideHandle=slider.attr("delegate-handle"),scrollHandle=tabsBar.attr("delegate-handle");ionicSlideBoxDelegate=$ionicSlideBoxDelegate,slideHandle&&(ionicSlideBoxDelegate=ionicSlideBoxDelegate.$getByHandle(slideHandle)),options.slideTabsScrollable&&(ionicScrollDelegate=$ionicScrollDelegate,scrollHandle&&(ionicScrollDelegate=ionicScrollDelegate.$getByHandle(scrollHandle))),addEvents(),setTabBarWidth(),slideToCurrentPosition()}()},controller:["$scope",function($scope){this.addTab=function($content){$timeout(function(){$scope.addTabContent&&$scope.addTabContent($content)})}}]}}]);slidingTabsDirective.directive("ionSlideTabLabel",[function(){return{require:"^ionSlideTabs",link:function($scope,$element,$attrs,$parent){$parent.addTab($attrs.ionSlideTabLabel)}}}]);