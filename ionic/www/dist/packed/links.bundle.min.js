angular.module("starter").controller("LinksViewController",function($scope,$stateParams,$rootScope,$timeout,$window,Links,LinkService){angular.extend($scope,{is_loading:!0,value_id:$stateParams.value_id,weblink:{},showSearch:!1,cardDesign:!1,search:{searchValue:""}}),Links.setValueId($stateParams.value_id),$scope.resetSearch=function(){$scope.search={searchValue:""}},$scope.populate=function(data){$scope.showSearch=data.settings.showSearch,$scope.cardDesign=data.settings.cardDesign,$scope.weblink=data.weblink,angular.isArray($scope.weblink.links)||($scope.weblink.links=[]),$scope.page_title=data.page_title},$scope.loadContent=function(){$scope.is_loading=!0,Links.find().then(function(data){$scope.populate(data)}).then(function(){$scope.is_loading=!1})},$scope.openLink=function(link){LinkService.openLink(link.url,link.options,link.external_browser)},$scope.reloadOverview=function(){$scope.is_loading=!0,Links.reloadOverview().then(function(data){$scope.populate(data)}).then(function(){$scope.is_loading=!1})},$window.overview&&($window.overview.weblink_multi=$scope.reloadOverview),$scope.loadContent()}),angular.module("starter").factory("Links",function($pwaRequest){var factory={value_id:null,extendedOptions:{},setValueId:function(value_id){factory.value_id=value_id},setExtendedOptions:function(options){factory.extendedOptions=options},find:function(){if(!this.value_id)return $pwaRequest.reject("[Factory::Links.find] missing value_id");var payload=$pwaRequest.getPayloadForValueId(factory.value_id);return!1!==payload?$pwaRequest.resolve(payload):$pwaRequest.get("weblink/mobile_multi/find",angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))},reloadOverview:function(){return $pwaRequest.post("weblink/mobile_multi/find",angular.extend({urlParams:{value_id:this.value_id}},factory.extendedOptions))}};return factory});